!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.ColorMix=r()}(this,function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),n=function(){function n(){r(this,n)}return t(n,[{key:"RGB",value:function(e,r,t){if("undefined"==typeof e||"undefined"==typeof r||"undefined"==typeof t)throw new Error('Invalid parameter(s) provided for "ColorSpace.RGB()"');return{red:isNaN(parseInt(e))?0:parseInt(e),green:isNaN(parseInt(r))?0:parseInt(r),blue:isNaN(parseInt(t))?0:parseInt(t)}}},{key:"XYZ",value:function(e,r,t){if("undefined"==typeof e||"undefined"==typeof r||"undefined"==typeof t)throw new Error('Invalid parameter(s) provided for "ColorSpace.XYZ()"');return{x:isNaN(parseFloat(e))?0:parseFloat(e),y:isNaN(parseFloat(r))?0:parseFloat(r),z:isNaN(parseFloat(t))?0:parseFloat(t)}}},{key:"HSL",value:function(e,r,t){if("undefined"==typeof e||"undefined"==typeof r||"undefined"==typeof t)throw new Error('Invalid parameter(s) provided for "ColorSpace.HSL()"');return{hue:isNaN(parseInt(e))?0:parseInt(e),sat:isNaN(parseInt(r))?0:parseInt(r),lig:isNaN(parseInt(t))?0:parseInt(t)}}},{key:"Lab",value:function(e,r,t){if("undefined"==typeof e||"undefined"==typeof r||"undefined"==typeof t)throw new Error('Invalid parameter(s) provided for "ColorSpace.Lab()"');return{L:isNaN(parseFloat(e))?0:parseFloat(e),a:isNaN(parseFloat(r))?0:parseFloat(r),b:isNaN(parseFloat(t))?0:parseFloat(t)}}},{key:"RGBtoXYZ",value:function(r,t,n){var o=void 0;if("undefined"!=typeof r&&"undefined"!=typeof t&&"undefined"!=typeof n)o=this.RGB(r,t,n);else{if("undefined"==typeof r||"object"!=("undefined"==typeof r?"undefined":e(r))||"undefined"==typeof r.red||"undefined"==typeof r.green||"undefined"==typeof r.blue)throw new Error('Invalid parameter(s) provided for "ColorSpace.RGBtoXYZ()".');o=this.RGB(r.red,r.green,r.blue)}var i=parseFloat(o.red/255),a=parseFloat(o.green/255),f=parseFloat(o.blue/255);return i=100*(i>.04045?Math.pow((i+.055)/1.055,2.4):i/=12.92),a=100*(a>.04045?Math.pow((a+.055)/1.055,2.4):a/=12.92),f=100*(f>.04045?Math.pow((f+.055)/1.055,2.4):f/=12.92),this.XYZ(.4124*i+.3576*a+.1805*f,.2126*i+.7152*a+.0722*f,.0193*i+.1192*a+.9505*f)}},{key:"XYZtoRGB",value:function(r,t,n){var o=void 0;if("undefined"!=typeof r&&"undefined"!=typeof t&&"undefined"!=typeof n)o=this.XYZ(r,t,n);else{if("undefined"==r||"object"!=("undefined"==typeof r?"undefined":e(r))||"undefined"==typeof r.x||"undefined"==typeof r.y||"undefined"==typeof r.z)throw new Error('Invalid parameter(s) provided for "ColorSpace.XYZtoRGB()".');o=this.XYZ(r.x,r.y,r.z)}var i=o.x/100,a=o.y/100,f=o.z/100,d=3.2406*i+a*-1.5372+f*-.4986,u=i*-.9689+1.8758*a+.0415*f,s=.0557*i+a*-.204+1.057*f;return d=255*(d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d*=12.92),u=255*(u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u*=12.92),s=255*(s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*=12.92),this.RGB(Math.round(d),Math.round(u),Math.round(s))}},{key:"RGBtoHSL",value:function(r,t,n){var o=void 0;if("undefined"!=typeof r&&"undefined"!=typeof t&&"undefined"!=typeof n)o=this.RGB(r,t,n);else{if("undefined"==r||"object"!=("undefined"==typeof r?"undefined":e(r))||"undefined"==typeof r.red||"undefined"==typeof r.green||"undefined"==typeof r.blue)throw new Error('Invalid parameter(s) provided for "ColorSpace.RGBtoXYZ()".');o=this.RGB(r.red,r.green,r.blue)}var i=o.red/255,a=o.green/255,f=o.blue/255,d=Math.max(i,a,f),u=Math.min(i,a,f),s=0,l=0,p=(d+u)/2;if(d!=u){var c=d-u;switch(l=p>.5?c/(2-d-u):c/(d+u),d){case"red":s=(a-f)/c+(a<f?6:0);break;case"green":s=(f-i)/c+2;break;case"blue":s=(i-a)/c+4}s/=6}return this.HSL(Math.floor(360*s),Math.floor(100*l),Math.floor(100*p))}},{key:"XYZtoLab",value:function(r,t,n){var o=void 0;if("undefined"!=typeof r&&"undefined"!=typeof t&&"undefined"!=typeof n)o=this.XYZ(r,t,n);else{if("undefined"==typeof r||"object"!=("undefined"==typeof r?"undefined":e(r))||"undefined"==typeof r.x||"undefined"==typeof r.y||"undefined"==typeof r.z)throw new Error('Invalid parameter(s) provided for "ColorSpace.XYZtoLab()".');o=this.XYZ(r.x,r.y,r.z)}var i=o.x/95.047,a=o.y/100,f=o.z/108.883;return i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,this.Lab(116*a-16,500*(i-a),200*(a-f))}},{key:"LabtoXYZ",value:function(r,t,n){var o=void 0;if("undefined"!=typeof r&&"undefined"!=typeof t&&"undefined"!=typeof n)o=this.Lab(r,t,n);else{if("undefined"==typeof r||"object"!=("undefined"==typeof r?"undefined":e(r))||"undefined"==typeof r.L||"undefined"==typeof r.a||"undefined"==typeof r.b)throw new Error('Invalid parameter(s) provided for "ColorSpace.LabtoXYZ()".');o=this.Lab(r.L,r.a,r.b)}var i=(o.L+16)/116,a=o.a/500+i,f=i-o.b/200;return i=Math.pow(i,3)>.008856?Math.pow(i,3):(i-16/116)/7.787,a=Math.pow(a,3)>.008856?Math.pow(a,3):(a-16/116)/7.787,f=Math.pow(f,3)>.008856?Math.pow(f,3):(f-16/116)/7.787,this.XYZ(95.047*a,100*i,108.883*f)}},{key:"RGBtoLab",value:function(e,r,t){if("undefined"==typeof e||"undefined"==typeof r||"undefined"==typeof t)throw new Error('Invalid parameter(s) provided for "ColorSpace.RGBtoLab()"');return this.XYZtoLab(this.RGBtoXYZ(e,r,t))}},{key:"LabtoRGB",value:function(e,r,t){if("undefined"==typeof e||"undefined"==typeof r||"undefined"==typeof t)throw new Error('Invalid parameter(s) provided for "ColorSpace.LabtoRGB()"');return this.XYZtoRGB(this.LabtoXYZ(e,r,t))}}]),n}(),o=new n,i=function(e){var r=[];return e.forEach(function(e){r.push(e)}),r},a=function(){function e(){r(this,e)}return t(e,[{key:"querySelectorAll",value:function(e){var r=[];if("undefined"!=typeof document&&(e=new String(e),e.length>0))if("querySelectorAll"in document)r=i(document.querySelectorAll(e));else switch(e[0]){case"#":r=[document.getElementById(e.slice(1))];break;case".":if(document.getElementsByClassName)r=i(document.getElementsByClassName(e));else for(var t=document.getElementsByTagName("*"),n=t.length;n--;)t[n].className===e.slice(1)&&r.push(t[n]);break;default:r=i(document.getElementsByTagName(e))}return r}}]),e}(),f=new a,d=function(){function n(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],o=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return r(this,n),this.red=0,this.green=0,this.blue=0,"string"==typeof e?this.fromHex(e):(this.red=parseInt(e),this.green=parseInt(t),this.blue=parseInt(o)),this}return t(n,[{key:"fromHex",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return e.length>0?("#"==e[0]&&(e=e.slice(1)),3==e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),this.red=parseInt(e.slice(0,2),16),this.green=parseInt(e.slice(2,4),16),this.blue=parseInt(e.slice(4,6),16)):(this.red=0,this.green=0,this.blue=0),this}},{key:"setRed",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this.red=Math.min(255,Math.max(0,parseInt(e))),this}},{key:"getRed",value:function(){return this.red}},{key:"setGreen",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this.green=Math.min(255,Math.max(0,parseInt(e))),this}},{key:"getGreen",value:function(){return this.green}},{key:"setBlue",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this.blue=Math.min(255,Math.max(0,parseInt(e))),this}},{key:"getBlue",value:function(){return this.blue}},{key:"toString",value:function(e){var r="",t=null;switch(e){case"rgb":r="rgb("+this.red+", "+this.green+", "+this.blue+")";break;case"rgba":r="rgba("+this.red+", "+this.green+", "+this.blue+", 1)";break;case"hsl":t=o.RGBtoHSL(this.red,this.green,this.blue),r="hsl("+t.hue+", "+t.sat+"%, "+t.lig+"%)";break;case"hsla":t=o.RGBtoHSL(this.red,this.green,this.blue),r="hsla("+t.hue+", "+t.sat+"%, "+t.lig+"%, 1)";break;default:r="#"+((1<<24)+(this.red<<16)+(this.green<<8)+this.blue).toString(16).slice(1)}return r}},{key:"useAsBackground",value:function(r){var t=this;if(r&&"object"==("undefined"==typeof r?"undefined":e(r)))"css"in r&&"function"==typeof r.css&&r.css("background-color",this.toString());else{var n=f.querySelectorAll(r);n.map(function(e){e.style["background-color"]=t.toString()})}return this}},{key:"useAsColor",value:function(r){var t=this;if(r&&"object"==("undefined"==typeof r?"undefined":e(r)))"css"in r&&"function"==typeof r.css&&r.css("color",this.toString());else{var n=f.querySelectorAll(r);n.map(function(e){e.style.color=t.toString()})}return this}}]),n}(),u=function(){function e(){return r(this,e),this.gradient=[{reference:0,color:{red:0,green:0,blue:0}},{reference:100,color:{red:255,green:255,blue:255}}],this}return t(e,[{key:"mix",value:function(e,r){if("undefined"==typeof e||"[object Array]"!=Object.prototype.toString.call(e))throw new Error('"ColorMixer.mix()" first parameter should be an array of ColorMixer.Color objects');if("undefined"==typeof r){r=[];for(var t=e.length;t--;)r[t]=100/e.length}else if("[object Array]"!=Object.prototype.toString.call(r))throw new Error('"ColorMixer.mix()" second parameter should be an array of percents. (nnumber values)');if(e.length!=r.length)throw new Error('"ColorMixer.mix()" parameters should be arrays of the same size !');for(var n=e.length,i=0,a=0,f=0,u=0;n--;){if(!(e[n]instanceof d))throw new Error('"ColorMixer.mix()" color at index: '+n+" should be an instance of ColorMixer.Color() object !");if(u+=r[n],u>100)throw new Error('Invalid "ColorMixer.mix()" second parameter: the sum of all the percents array items should be 100.');var s=o.RGBtoLab(e[n].getRed(),e[n].getGreen(),e[n].getBlue());i+=s.L*r[n]/100,a+=s.a*r[n]/100,f+=s.b*r[n]/100}if(100!=u)throw new Error('Invalid "ColorMixer.mix()" second parameter: the sum of all the percents array items should be 100.');var l=o.LabtoRGB(i,a,f);return new d(l.red,l.green,l.blue)}},{key:"setGradient",value:function(e){return"undefined"!=typeof e&&"[object Array]"==Object.prototype.toString.call(e)&&(this.gradient=e),this}},{key:"getGradient",value:function(){return this.gradient}},{key:"blend",value:function(e){if("undefined"==typeof e)throw new Error('Missing "ColorMixer.blend()" first parameter.');if(e=parseInt(e),isNaN(e))throw new Error('Invalid "ColorMixer.blend()" first parameter: you should provide a number.');var r=this.gradient.length,t=this.gradient[0],n=this.gradient[r-1];if(e<=t.reference)return new d(t.color.red,t.color.green,t.color.blue);if(e>=n.reference)return new d(n.color.red,n.color.green,n.color.blue);for(;r--;){var o=this.gradient[r];o.reference<=e&&o.reference>t.reference?t=o:o.reference>=e&&o.reference<n.reference&&(n=o)}var i=new d(t.color.red,t.color.green,t.color.blue),a=new d(n.color.red,n.color.green,n.color.blue);return t.percent=Math.abs(100/((t.reference-n.reference)/(e-n.reference))),n.percent=100-t.percent,this.mix([i,a],[t.percent,n.percent])}}]),e}(),s=new u;return s.Color=d,s.ColorSpace=o,s});